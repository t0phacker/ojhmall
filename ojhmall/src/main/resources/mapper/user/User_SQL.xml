<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="signUp">

	<select id="selectBoardList" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
			SELECT
			    IDX,
			    TITLE,
			    HIT_CNT,
			    CREA_DTM
			FROM
			    TB_BOARD
			ORDER BY IDX DESC
		]]>
	</select>
	<select id="selectMaxNum" parameterType="hashmap" resultType="hashmap"> 
		<![CDATA[ SELECT MAX(UserNumber) AS UserNumber FROM user ]]>
	</select>

	<insert id="insertUser" parameterType="ojhmall.vo.Customer">
    <![CDATA[
        INSERT INTO user
        (
            userType,
            id, 
            userPassword, 
            userName, 
            newDate, 
            newUser, 
            updateDate,
            updateUser
        )
        VALUES
        (
            1, 
            #{id},
            #{userPassword},
            #{userName},
            default,
            1, 
            default, 
            1
        )
    ]]>
	</insert>

	<update id="updateUser" parameterType="ojhmall.vo.Customer"> 
		<![CDATA[ UPDATE user SET newUSER = #{userNumber} WHERE userNumber = #{userNumber} ]]>
	</update>

	<insert id="insertCustomer" parameterType="ojhmall.vo.Customer">
    <![CDATA[
        INSERT INTO customer
        (
            user_userNumber,
            phNumber, 
            address, 
            zipCode
        )
        VALUES
        (
            #{userNumber}, 
            #{phNumber},
            #{address},
            #{zipCode}
        )
    ]]>
	</insert>
	
	<insert id="insertUser2" parameterType="ojhmall.vo.Seller">
    <![CDATA[
        INSERT INTO user
        (
            userType,
            id, 
            userPassword, 
            userName, 
            newDate, 
            newUser, 
            updateDate,
            updateUser
        )
        VALUES
        (
            2, 
            #{id},
            #{userPassword},
            #{userName},
            default,
            1, 
            default, 
            1
        )
    ]]>
	</insert>
	
	<select id="updateUser2" parameterType="ojhmall.vo.Seller"> 
		<![CDATA[ UPDATE user SET newUSER = #{userNumber} WHERE userNumber = #{userNumber} ]]>
	</select>
	
	<insert id="insertSeller" parameterType="ojhmall.vo.Seller">
    <![CDATA[
        INSERT INTO seller
        (
            user_userNumber,
            phNumber, 
            address, 
            zipCode,
            bizNumber,
            accNumber
        )
        VALUES
        (
            #{userNumber}, 
            #{phNumber},
            #{address},
            #{zipCode},
            #{bizNumber},
            #{accNumber}
        )
    ]]>
	</insert>
	
	<update id="update" parameterType="ojhmall.vo.User"> 
		<![CDATA[ UPDATE user SET userName = #{userName}, userPassword = #{userPassword} WHERE userNumber = #{userNumber} ]]>
	</update>
	<update id="updateCustomer" parameterType="ojhmall.vo.Customer"> 
		<![CDATA[ UPDATE customer SET userName = #{userName}, userPassword = #{userPassword} WHERE user_userNumber = #{userNumber} ]]>
	</update>
	<update id="updateCustomerMoreInfo" parameterType="ojhmall.vo.Customer"> 
		<![CDATA[ UPDATE customer SET phNumber = #{phNumber}, address = #{address}, zipCode = #{zipCode} WHERE user_userNumber = #{userNumber} ]]>
	</update>
	<update id="updateSeller" parameterType="ojhmall.vo.Seller"> 
		<![CDATA[ UPDATE seller SET userName = #{userName}, userPassword = #{userPassword} WHERE user_userNumber = #{userNumber} ]]>
	</update>
	<update id="updateSellerMoreInfo" parameterType="ojhmall.vo.Seller"> 
		<![CDATA[ UPDATE seller SET phNumber = #{phNumber}, address = #{address}, zipCode = #{zipCode}, bizNumber = #{bizNumber}, accNumber = #{accNumber} WHERE user_userNumber = #{userNumber} ]]>
	</update>
	
	<select id="signUp.updatingUser" parameterType="ojhmall.vo.User" resultType="ojhmall.vo.User">
		<![CDATA[
			SELECT
				userNumber, id, userPassword, userName, userType
			FROM
			    user u
			WHERE u.userNumber=#{userNumber}
		]]>
	</select>
	<!-- #{phNum}, #{address}, #{zipCode} -->
</mapper>

