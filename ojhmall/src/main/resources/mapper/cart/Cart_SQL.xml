<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Cart">
	<!-- 장바구니 추가 -->
	<insert id="insertCart" parameterType="ojhmall.vo.Cart">
		<![CDATA[
			INSERT INTO cart
				(prdNumber, userNumber, prdAmount, cartPrice, newUser, updateUser)
			VALUES
			    (#{prdNumber}, #{userNumber}, #{prdAmount}, #{cartPrice}, #{userNumber}, #{userNumber})
		]]>
	</insert>
	<!-- 장바구니 목록 불러오기 -->
	<select id="loadCartList" parameterType="ojhmall.vo.Cart"
		resultType="ojhmall.vo.Cart">
		<![CDATA[
			SELECT
				c.cartNumber, c.prdAmount, c.cartPrice, p.prdName, p.image, 
				c.userNumber, p.userNumber as user_userNumber, u.id
			FROM
			    cart c, product p, user u
			WHERE c.userNumber = #{userNumber}
            and p.userNumber = u.userNumber 
            and c.prdNumber = p.prdNumber
			ORDER BY p.userNumber ASC
		]]>
	</select>
	<delete id="removeCart" parameterType="int">
		<![CDATA[
			DELETE FROM cart
			WHERE cartNumber = #{cartNumber}
		]]>
	</delete>

</mapper>