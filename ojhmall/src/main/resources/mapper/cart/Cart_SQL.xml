<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Cart">
	<!-- 장바구니 추가 -->
	<insert id="insertCart" parameterType="ojhmall.vo.Cart">
		<![CDATA[
			INSERT INTO cart
				(prdNumber, userNumber, prdAmount, cartPrice, newUser, updateUser)
			VALUES
			    (#{prdNumber}, #{userNumber}, #{prdAmount}, #{cartPrice}, #{userNumber}, #{userNumber})
		]]>
	</insert>
	<!-- 장바구니 목록 불러오기 -->
	<select id="loadCartList" parameterType="ojhmall.vo.Cart" resultType="ojhmall.vo.Cart">
		<![CDATA[
			SELECT
				c.cartNumber, c.prdAmount, c.cartPrice, p.prdName, p.image, c.userNumber, s.user_userNumber
			FROM
			    cart c, product p, seller s
			WHERE c.prdNumber=p.prdNumber and c.userNumber = #{userNumber} and s.user_userNumber = p.userNumber
			ORDER BY p.userNumber ASC
		]]>
	</select>
	
	<select id="loadSameSellerCart" parameterType="ojhmall.vo.Cart" resultType="ojhmall.vo.Cart">
		<![CDATA[
			SELECT
				c.cartNumber, c.prdAmount, c.cartPrice, p.prdName, p.image, c.userNumber, s.user_userNumber
			FROM
			    cart c, product p, seller s
			WHERE c.prdNumber=p.prdNumber and c.userNumber = #{userNumber} and s.user_userNumber = p.userNumber
		]]>
	</select>
</mapper>